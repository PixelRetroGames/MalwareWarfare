#ifndef FIELD_UNIT_H
#define FIELD_UNIT_H

#include "combat_unit.h"

#include "firewall.h"
#include "trap.h"
#include "firewall_plus.h"
#include "antivirus_scanner.h"
#include "security_service.h"
#include "healer.h"
#include "slow_tower.h"

#include "virus.h"
#include "malware.h"
#include "malware_defender.h"
#include "trojan.h"
#include "glitch.h"

#include "constants.h"


class Field_unit
{
 protected:
 int map_x,map_y;
 int phase;
 int damage_taken;
 Combat_unit *unit=NULL;
 Unit_animation animation;
 int angle,state;
 Timer phase_timer;
 Texture *hp_image=NULL;
 Timer special_effect_timer;
 Timer state_timer;
 Timer special_effect_duration_timer;
 bool triggered=false;
 Timer spawn_timer;
 int stun_time=0;
 Timer stun_timer;
 int slow_time=0;
 Timer slow_timer;

 public:
 Field_unit();
 void Clear();
 void Print(int x,int y,Texture *_screen);
 void Update_phase();
 void Set_map_pos(int x,int y);
 void Set_map_pos(std::pair<int,int> pos);
 void Set_damage_taken(int _damage_taken);
 void Take_damage(int _damage);
 void Set_unit(Combat_unit *_unit);
 void Set_angle(int _angle);
 void Set_state(int _state);
 std::pair<int,int> Get_map_pos();
 Combat_unit *Get_combat_unit();
 int Get_phase();
 int Get_state();
 bool Is_dead();
 bool Phase_finished();
 bool Is_firewall();
 bool Is_virus();
 bool Triggered_special_effect();
 void Update_frame();
 bool Special_effect_finished(int duration);
 void Start_special_effect_timer();
 bool Ready_to_spawn();
 void Start_spawn_timer();
 bool Is_triggered();
 void Trigger();
 void Stun(int _stun_time);
 bool Is_stunned();
 void Slow(int _slow_time);
 bool Is_slowed();
};

#endif // FIELD_UNIT_H
