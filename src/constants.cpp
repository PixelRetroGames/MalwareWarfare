#include "constants.h"

SDL_Color ATTACKER_ID_COLOR={255,124,215},DEFENDER_ID_COLOR={135,255,124},RAM_COLOR={255,255,255};
SDL_Color VIRUS_COOLDOWN_COLOR={255,255,255},VIRUS_DAMAGE_COLOR={255,0,178},VIRUS_COOLDOWN_COUNTER_COLOR={255,255,255},
VIRUS_NAME_COLOR={0,0,0},VIRUS_HEALTH_COLOR={25,255,0};
SDL_Color FIREWALL_COST_COLOR={255,255,255},FIREWALL_HEALTH_COLOR={25,255,0},FIREWALL_NAME_COLOR={0,0,0};
SDL_Color ANTIVIRUS_DAMAGE_COLOR={255,0,178};
SDL_Color FIREWALL_PLUS_DAMAGE_COLOR={255,0,178};
SDL_Color MALWARE_RADIUS_COLOR={255,255,255},MALWARE_DEFENDER_SHIELD_COLOR={0,0,0};
SDL_Color CPU_HP_COLOR={255,255,255},PLAYER_HP_COLOR={0,0,0},GAME_TIME_COLOR={255,255,255};

const int NUMBER_OF_COLORS=18;

void Load_colors_constants()
{
 SDL_Color *colors[NUMBER_OF_COLORS]={&ATTACKER_ID_COLOR,&DEFENDER_ID_COLOR,&RAM_COLOR,&VIRUS_COOLDOWN_COLOR,&VIRUS_DAMAGE_COLOR,
                        &VIRUS_COOLDOWN_COUNTER_COLOR,&VIRUS_NAME_COLOR,&FIREWALL_COST_COLOR,&FIREWALL_HEALTH_COLOR,
                        &FIREWALL_NAME_COLOR,&ANTIVIRUS_DAMAGE_COLOR,&FIREWALL_PLUS_DAMAGE_COLOR,&VIRUS_HEALTH_COLOR,
                        &MALWARE_RADIUS_COLOR,&MALWARE_DEFENDER_SHIELD_COLOR,&CPU_HP_COLOR,&PLAYER_HP_COLOR,&GAME_TIME_COLOR};
 char *color_names[NUMBER_OF_COLORS]={"ATTACKER_ID_COLOR","DEFENDER_ID_COLOR","RAM_COLOR","VIRUS_COOLDOWN_COLOR","VIRUS_DAMAGE_COLOR",
                        "VIRUS_COOLDOWN_COUNTER_COLOR","VIRUS_NAME_COLOR","FIREWALL_COST_COLOR","FIREWALL_HEALTH_COLOR",
                        "FIREWALL_NAME_COLOR","ANTIVIRUS_DAMAGE_COLOR","FIREWALL_PLUS_DAMAGE_COLOR","VIRUS_HEALTH_COLOR",
                        "MALWARE_RADIUS_COLOR","MALWARE_DEFENDER_SHIELD_COLOR","CPU_HP_COLOR","PLAYER_HP_COLOR","GAME_TIME_COLOR"};
 FILE *in=fopen("res/config/colors.cfg","r");
 char s[TEXT_LENGTH_MAX];
 fscanf(in,"%s %s ",s,s);
 for(int i=0;i<NUMBER_OF_COLORS;i++)
     {
      SDL_Color aux;
      int r,g,b;
      fscanf(in," %s %d %d %d ",s,&r,&g,&b);
      aux={r,g,b};
      if(strcmp(color_names[i],s)==0)
         {
          *colors[i]=aux;
          continue;
         }
      for(int j=0;j<NUMBER_OF_COLORS;j++)
          if(strcmp(color_names[j],s)==0)
             {
              *colors[j]=aux;
              break;
             }
     }
 fclose(in);
}

int INITIAL_TOTAL_RAM=50,GAME_TIME=5*60000,CPU_HEALTH=10,ANTIVIRUS_SCANNER_SPECIAL_EFFECT_DURATION=1000;

const int NUMBER_OF_INTS=4;

void Load_int_constants()
{
 int *vars[NUMBER_OF_INTS]={&INITIAL_TOTAL_RAM,&GAME_TIME,&CPU_HEALTH,&ANTIVIRUS_SCANNER_SPECIAL_EFFECT_DURATION};
 char *vars_names[NUMBER_OF_INTS]={"INITIAL_TOTAL_RAM","GAME_TIME","CPU_HEALTH","ANTIVIRUS_SCANNER_SPECIAL_EFFECT_DURATION"};
 FILE *in=fopen("res/config/ints.cfg","r");
 char s[TEXT_LENGTH_MAX];
 fscanf(in,"%s %s ",s,s);
 for(int i=0;i<NUMBER_OF_INTS;i++)
     {
      int val;
      fscanf(in," %s %d",s,&val);
      if(strcmp(vars_names[i],s)==0)
         {
          *vars[i]=val;
          continue;
         }
      for(int j=0;j<NUMBER_OF_INTS;j++)
          if(strcmp(vars_names[j],s)==0)
             {
              *vars[j]=val;
              break;
             }
     }
 fclose(in);
}

void Load_constants()
{
 Load_colors_constants();
 Load_int_constants();
}
