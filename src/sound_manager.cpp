#include "sound_manager.h"

Mix_Chunk *UNIT_DAMAGE_SOUND,*VIRUS_PLACEMENT_SOUND,*FIREWALL_PLACEMENT_SOUND,*LASER_SOUND;
Mix_Chunk *PORTAL_SOUND,*SLOW_SOUND,*FIREWALL_ATTACK_SOUND,*GLITCH_SOUND,*CPU_DAMAGE_SOUND,*VIRUS_ATTACK_SOUND;
Mix_Music *MENU_MUSIC;
bool LOADED_SOUNDS=false;

void Load_sounds()
{
 if(LOADED_SOUNDS)
    return;
 UNIT_DAMAGE_SOUND=Mix_LoadWAV("res/music/FX/unit_damage.wav");
 VIRUS_PLACEMENT_SOUND=Mix_LoadWAV("res/music/FX/virus_placement.wav");
 FIREWALL_PLACEMENT_SOUND=Mix_LoadWAV("res/music/FX/firewall_placement.wav");
 LASER_SOUND=Mix_LoadWAV("res/music/FX/laser.wav");
 PORTAL_SOUND=Mix_LoadWAV("res/music/FX/portal.wav");
 SLOW_SOUND=Mix_LoadWAV("res/music/FX/slow.wav");
 FIREWALL_ATTACK_SOUND=Mix_LoadWAV("res/music/FX/firewall_attack.wav");
 GLITCH_SOUND=Mix_LoadWAV("res/music/FX/glitch.wav");
 CPU_DAMAGE_SOUND=Mix_LoadWAV("res/music/FX/CPU_damage.wav");
 VIRUS_ATTACK_SOUND=Mix_LoadWAV("res/music/FX/virus_attack.wav");
 MENU_MUSIC=Mix_LoadMUS("res/music/Agnet 75 - Malware Warfare Title Screen Soundtrack.mp3");
 fprintf(stderr,"%s",Mix_GetError());
 LOADED_SOUNDS=true;
}

void Clear_sounds()
{
 if(!LOADED_SOUNDS)
    return;
 Mix_FreeChunk(UNIT_DAMAGE_SOUND);
 Mix_FreeChunk(VIRUS_PLACEMENT_SOUND);
 Mix_FreeChunk(FIREWALL_PLACEMENT_SOUND);
 Mix_FreeChunk(LASER_SOUND);
 Mix_FreeChunk(PORTAL_SOUND);
 Mix_FreeChunk(SLOW_SOUND);
 Mix_FreeChunk(FIREWALL_ATTACK_SOUND);
 Mix_FreeChunk(GLITCH_SOUND);
 Mix_FreeChunk(CPU_DAMAGE_SOUND);
 Mix_FreeChunk(VIRUS_ATTACK_SOUND);
 Mix_FreeMusic(MENU_MUSIC);
 LOADED_SOUNDS=false;
}

void Sound_Manager::Play_sound(Mix_Chunk *sound)
{
 Mix_PlayChannel(-1,sound,0);
}

void Sound_Manager::Play_sound(Mix_Chunk *sound,int loops)
{
 Mix_PlayChannel(-1,sound,loops);
}
