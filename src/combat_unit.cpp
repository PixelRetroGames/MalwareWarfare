#include "combat_unit.h"

const int STATE_IDLE=0,STATE_ATTACKING=1,STATE_DYING=2,STATE_WALKING=3;

Combat_unit::Combat_unit()
{
 for(int i=0;i<4;i++)
     animations[i].Set_image(NULL);
 menu_image.Set_image(NULL);
 menu_description=NULL;
}

void Combat_unit::Clear_images()
{
 for(int i=0;i<4;i++)
     animations[i].Clear();
 menu_image.Clear();
 Destroy_Texture(menu_description);
 id=-1;
 number_of_frames=1;
 current_frame=0;
}

void Combat_unit::Print(int _frame,int x,int y,int angle,int state,Texture *_screen)
{
 Apply_Rotated_Texture(animations[state].Get_image(),{_frame*PIXELS_PER_INGAME_UNIT,0,PIXELS_PER_INGAME_UNIT,PIXELS_PER_INGAME_UNIT},
                       _screen,{x,y,PIXELS_PER_INGAME_UNIT,PIXELS_PER_INGAME_UNIT},angle);
}

void Combat_unit::Print_in_menu(int x,int y,Texture *_screen)
{
 Apply_Texture(x,y,MENU_OPTION_BACKGROUND,_screen);
 Apply_Texture(current_frame*2*PIXELS_PER_INGAME_UNIT<menu_image.Get_image()->w?menu_image.Get_unit_animation()->Get_current_frame()*2*PIXELS_PER_INGAME_UNIT:menu_image.Get_unit_animation()->Get_current_frame()*2*PIXELS_PER_INGAME_UNIT%menu_image.Get_image()->w,0,x+5,y+(MENU_OPTION_BACKGROUND->h-2*PIXELS_PER_INGAME_UNIT)/2,2*PIXELS_PER_INGAME_UNIT,2*PIXELS_PER_INGAME_UNIT,menu_image.Get_image(),_screen);
 Apply_Texture(x+5+2*PIXELS_PER_INGAME_UNIT+(MENU_OPTION_BACKGROUND->w-(5+2*PIXELS_PER_INGAME_UNIT)-menu_description->w)/2,y+(MENU_OPTION_BACKGROUND->h-menu_description->h-MENU_CONTROLLER_KEYS[id%4]->h)/2+5,menu_description,_screen);
 Apply_Texture(x+5+2*PIXELS_PER_INGAME_UNIT+(MENU_OPTION_BACKGROUND->w-(5+2*PIXELS_PER_INGAME_UNIT)-MENU_CONTROLLER_KEYS[id%4]->w)/2,y+MENU_OPTION_BACKGROUND->h-MENU_CONTROLLER_KEYS[id%4]->h,MENU_CONTROLLER_KEYS[id%4],_screen);
}

void Combat_unit::Update_frame()
{
 menu_image.Get_unit_animation()->Update_frame();
}

int Combat_unit::Get_id()
{
 return id;
}

int Combat_unit::Get_damage()
{
 return 0;
}

int Combat_unit::Get_health()
{
 return 1;
}

int Combat_unit::Get_radius()
{
 return 0;
}

int Combat_unit::Get_attack_delay()
{
 return 0;
}

Unit_animation Combat_unit::Get_animation(int id)
{
 return *animations[id].Get_unit_animation();
}

int Combat_unit::Get_range()
{
}

int Combat_unit::Get_spawn_delay()
{
}
