#include "file_parser.h"

void Parse_file(FILE *in,
                int number_of_vars,int **vars,const char **vars_names,
                int number_of_strings,char **strings,const char **strings_names)
{
 for(int i=0;i<number_of_vars+number_of_strings;i++)
     {
      char var_name[TEXT_LENGTH_MAX];
      fscanf(in,"%s ",var_name);
      if(i<number_of_vars && strcmp(var_name,vars_names[i])==0)
         {
          fscanf(in,"%d ",vars[i]);
          continue;
         }
      if(i>=number_of_vars && strcmp(var_name,strings_names[i-number_of_vars])==0)
         {
          fgets(strings[i-number_of_vars],TEXT_LENGTH_MAX,in);
          int sq=strlen(strings[i-number_of_vars]);
          if(strings[i-number_of_vars][sq-1]=='\n')
             strings[i-number_of_vars][sq-1]=NULL;
          continue;
         }
      bool found=false;
      for(int j=0;j<number_of_vars && !found;j++)
          {
           if(strcmp(var_name,vars_names[j])==0)
              {
               fscanf(in,"%d ",vars[i]);
               found=true;
              }
          }
      for(int j=0;j<number_of_strings && !found;j++)
          {
           if(strcmp(var_name,strings_names[j]))
              {
               fgets(strings[j],TEXT_LENGTH_MAX,in);
               int sq=strlen(strings[j]);
               if(strings[j][sq-1]=='\n')
                  strings[j][sq-1]=NULL;
               continue;
              }
          }
     }
}
